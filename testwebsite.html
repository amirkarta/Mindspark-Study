<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindSpark | AI Study Assistant</title>
    <style>
        /* --- CSS VARIABLES & RESET --- */
        :root {
            --primary: #6366f1; /* Indigo */
            --primary-hover: #4f46e5;
            --bg-body: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --accent-green: #10b981;
            --accent-purple: #a855f7;
            --accent-orange: #f59e0b;
            --radius: 12px;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-family);
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- LAYOUT --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            width: 100%;
            flex: 1;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
        }

        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; }
        }

        /* --- SIDEBAR (PROGRESS) --- */
        .sidebar {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            height: fit-content;
        }

        .user-profile {
            text-align: center;
            margin-bottom: 2rem;
        }

        .avatar {
            width: 80px;
            height: 80px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            margin: 0 auto 1rem;
        }

        .level-badge {
            background: #e0e7ff;
            color: var(--primary);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            gap: 1rem;
        }

        .stat-item {
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-label { font-size: 0.9rem; color: var(--text-muted); }
        .stat-value { font-weight: bold; font-size: 1.1rem; }

        /* --- MAIN CONTENT --- */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .logo-section {
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: center;
        }

        .logo-section img {
            max-width: 120px;
            height: auto;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        header h1 {
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* Input Section */
        .input-card {
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
            margin-bottom: 1rem;
            transition: border-color 0.2s;
        }

        textarea:focus { outline: none; border-color: var(--primary); }

        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .file-upload-label {
            cursor: pointer;
            color: var(--text-muted);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .file-upload-label:hover { color: var(--primary); }

        /* Action Buttons */
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .action-btn {
            border: none;
            padding: 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            color: white;
        }

        .action-btn:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
        .action-btn:active { transform: translateY(0); }

        .btn-summary { background: linear-gradient(135deg, #6366f1, #4f46e5); }
        .btn-cards { background: linear-gradient(135deg, #10b981, #059669); }
        .btn-quiz { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .btn-eli5 { background: linear-gradient(135deg, #a855f7, #9333ea); }

        /* --- RESULTS SECTION --- */
        #output-area {
            animation: fadeIn 0.5s ease-out;
        }

        .result-card {
            background: var(--bg-card);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border-left: 5px solid var(--primary);
        }

        .flashcard-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }

        .flashcard {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            cursor: pointer;
            perspective: 1000px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: transform 0.3s;
            position: relative;
        }

        .flashcard:hover { border-color: var(--primary); }
        .flashcard.flipped { background-color: #f0fdf4; border-color: var(--accent-green); }

        .quiz-option {
            display: block;
            width: 100%;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
        }
        
        .quiz-option:hover { background: #e0e7ff; }
        .quiz-option.correct { background: #dcfce7; border-color: var(--accent-green); }
        .quiz-option.wrong { background: #fee2e2; border-color: #ef4444; }

        /* Loading Spinner */
        .loader {
            display: none;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

<div class="container">
    <aside class="sidebar">
        <div class="user-profile">
            <div class="avatar">üéì</div>
            <h2>Student</h2>
            <span class="level-badge" id="user-level">Level 1 Novice</span>
        </div>
        
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-label">Total XP</span>
                <span class="stat-value" id="xp-display">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Streak</span>
                <span class="stat-value">üî• <span id="streak-display">0</span> days</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Items Created</span>
                <span class="stat-value" id="items-display">0</span>
            </div>
        </div>
        
        <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid #e2e8f0;">
        
        <div style="text-align: center; color: var(--text-muted); font-size: 0.8rem;">
            <p>"Success is the sum of small efforts repeated day in and day out."</p>
        </div>
    </aside>

    <main class="main-content">
        <header>
            <!--
            <div class="logo-section">
                <img src="assets/images/10.png" alt="MindSpark Logo">
            </div>
            -->
            
            <h1>MindSpark</h1>
            <p style="color: var(--text-muted);">Paste your notes below and let AI transform your study routine.</p>
        </header>

        <section class="input-card">
            <textarea id="user-input" placeholder="Paste your lecture notes, textbook paragraphs, or essay draft here..."></textarea>
            
            <div class="toolbar">
                <label class="file-upload-label">
                    <input type="file" id="file-upload" accept=".txt" style="display: none;">
                    üìé Upload .txt file
                </label>
                <span id="char-count" style="color: var(--text-muted); font-size: 0.9rem;">0 chars</span>
            </div>
        </section>

        <section class="actions-grid">
            <button class="action-btn btn-summary" onclick="generateContent('summary')">
                <span>üìù</span> Study Summary
            </button>
            <button class="action-btn btn-cards" onclick="generateContent('flashcards')">
                <span>üóÇÔ∏è</span> Flashcards
            </button>
            <button class="action-btn btn-quiz" onclick="generateContent('quiz')">
                <span>‚ùì</span> Generate Quiz
            </button>
            <button class="action-btn btn-eli5" onclick="generateContent('eli5')">
                <span>üë∂</span> Explain Like I'm 5
            </button>
        </section>

        <div class="loader" id="loader"></div>
        <section id="output-area"></section>
    </main>
</div>

<script>
    /* --- 1. STATE MANAGEMENT & STORAGE --- */
    const defaultState = {
        xp: 0,
        streak: 1,
        itemsCreated: 0,
        lastLogin: new Date().toDateString()
    };

    let userState = JSON.parse(localStorage.getItem('mindSparkState')) || defaultState;

    // Check Streak
    const today = new Date().toDateString();
    if (userState.lastLogin !== today) {
        // Logic to increment or reset streak would go here
        userState.lastLogin = today;
        saveState();
    }

    function saveState() {
        localStorage.setItem('mindSparkState', JSON.stringify(userState));
        updateDashboard();
    }

    function updateDashboard() {
        document.getElementById('xp-display').innerText = userState.xp;
        document.getElementById('streak-display').innerText = userState.streak;
        document.getElementById('items-display').innerText = userState.itemsCreated;
        
        // Simple Level Logic: Level up every 100 XP
        const level = Math.floor(userState.xp / 100) + 1;
        document.getElementById('user-level').innerText = `Level ${level} Scholar`;
    }

    // Initialize UI
    updateDashboard();

    /* --- 2. INPUT HANDLING --- */
    const textArea = document.getElementById('user-input');
    const charCount = document.getElementById('char-count');

    textArea.addEventListener('input', () => {
        charCount.innerText = `${textArea.value.length} chars`;
    });

    // File Upload Simulation
    document.getElementById('file-upload').addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = (e) => {
            textArea.value = e.target.result;
            charCount.innerText = `${textArea.value.length} chars`;
        };
        reader.readAsText(file);
    });

    /* --- 3. MOCK AI ENGINE (Simulates Backend) --- */
    // In a real app, replace `simulateAIResponse` with a fetch() call to OpenAI/Anthropic
    
    async function simulateAIResponse(text, mode) {
        return new Promise((resolve) => {
            setTimeout(() => {
                let response;
                const sentences = text.split('.').filter(s => s.length > 10);
                
                switch(mode) {
                    case 'summary':
                        response = {
                            title: "Key Takeaways",
                            content: `Here is a concise summary of your notes:\n\n‚Ä¢ ${sentences[0] || 'No content'}.\n‚Ä¢ ${sentences[1] || 'Add more text for better results'}.\n‚Ä¢ ${sentences[sentences.length-1] || 'Conclusion'}.`
                        };
                        break;
                    case 'eli5':
                        response = {
                            title: "Simply Put",
                            content: `Imagine this like a Lego set. ${sentences[0] ? sentences[0].toLowerCase() : 'It'} is basically the main block. When you put it together, it works because... (AI simplified logic would go here).`
                        };
                        break;
                    case 'flashcards':
                        // Create mock cards from sentences
                        response = sentences.slice(0, 4).map((s, i) => ({
                            front: `Concept #${i + 1} from text`,
                            back: s.trim()
                        }));
                        break;
                    case 'quiz':
                        response = [
                            {
                                question: "What is the main concept discussed in the first paragraph?",
                                options: ["The first sentence", "Something irrelevant", "A wrong answer", "Another wrong answer"],
                                correct: 0
                            },
                            {
                                question: "Which of the following is implied by the text?",
                                options: ["Option A", "Option B", "Option C", "The text implies this"],
                                correct: 3
                            }
                        ];
                        break;
                }
                resolve(response);
            }, 1500); // Simulate network delay
        });
    }

    /* --- 4. CORE LOGIC --- */
    async function generateContent(mode) {
        const text = textArea.value.trim();
        if (!text) {
            alert("Please enter some text or upload a note first!");
            return;
        }

        // UI Loading State
        const loader = document.getElementById('loader');
        const outputArea = document.getElementById('output-area');
        outputArea.innerHTML = '';
        loader.style.display = 'block';

        // Get Data
        const data = await simulateAIResponse(text, mode);
        
        // Hide Loader
        loader.style.display = 'none';

        // Render based on mode
        if (mode === 'summary' || mode === 'eli5') {
            renderTextResult(data.title, data.content);
        } else if (mode === 'flashcards') {
            renderFlashcards(data);
        } else if (mode === 'quiz') {
            renderQuiz(data);
        }

        // Gamification Update
        userState.xp += 20;
        userState.itemsCreated += 1;
        saveState();
    }

    /* --- 5. RENDER FUNCTIONS --- */
    
    function renderTextResult(title, content) {
        const div = document.createElement('div');
        div.className = 'result-card';
        div.innerHTML = `
            <h3 style="color:var(--primary); margin-bottom:1rem;">${title}</h3>
            <p style="white-space: pre-line;">${content}</p>
        `;
        document.getElementById('output-area').appendChild(div);
    }

    function renderFlashcards(cards) {
        const container = document.createElement('div');
        container.className = 'flashcard-container';
        
        cards.forEach(card => {
            const cardEl = document.createElement('div');
            cardEl.className = 'flashcard';
            cardEl.innerText = card.front;
            cardEl.onclick = () => {
                cardEl.classList.toggle('flipped');
                cardEl.innerText = cardEl.classList.contains('flipped') ? card.back : card.front;
            };
            container.appendChild(cardEl);
        });
        document.getElementById('output-area').appendChild(container);
    }

    function renderQuiz(questions) {
        const container = document.createElement('div');
        container.className = 'result-card';
        
        questions.forEach((q, idx) => {
            const qBlock = document.createElement('div');
            qBlock.style.marginBottom = '2rem';
            qBlock.innerHTML = `<h4 style="margin-bottom:1rem;">${idx+1}. ${q.question}</h4>`;
            
            q.options.forEach((opt, optIdx) => {
                const btn = document.createElement('button');
                btn.className = 'quiz-option';
                btn.innerText = opt;
                btn.onclick = function() {
                    // Reset siblings
                    Array.from(qBlock.querySelectorAll('.quiz-option')).forEach(b => {
                        b.classList.remove('correct', 'wrong');
                        b.disabled = true;
                    });
                    
                    if(optIdx === q.correct) {
                        this.classList.add('correct');
                        userState.xp += 10; // Bonus XP for correct answer
                        saveState();
                    } else {
                        this.classList.add('wrong');
                    }
                };
                qBlock.appendChild(btn);
            });
            container.appendChild(qBlock);
        });
        document.getElementById('output-area').appendChild(container);
    }

</script>
</body>
</html>